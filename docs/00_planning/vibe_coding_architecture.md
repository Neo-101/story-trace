# ğŸ—ï¸ Vibe Coding æ¶æ„å®£è¨€ï¼šAI æ—¶ä»£çš„è½¯ä»¶å·¥ç¨‹æ–‡è‰ºå¤å…´

> **"Constraint is Liberation." (çº¦æŸå³è‡ªç”±)**
> åœ¨ AI è¾…åŠ©ç¼–ç¨‹ (Vibe Coding) æ—¶ä»£ï¼Œä»£ç ç”Ÿæˆçš„æˆæœ¬è¶‹è¿‘äºé›¶ã€‚è½¯ä»¶å·¥ç¨‹çš„æ ¸å¿ƒä»·å€¼ä»â€œç¼–å†™ä»£ç â€è½¬ç§»åˆ°äº†**â€œè®¾è®¡çº¦æŸâ€**ã€‚åªæœ‰é€šè¿‡ä¸¥å¯†çš„æ¶æ„çº¦æŸ AI çš„è¡Œä¸ºï¼Œäººç±»æ‰èƒ½çœŸæ­£é©¾é©­æ™ºèƒ½ï¼Œæˆä¸ºç³»ç»Ÿçš„æ€»è®¾è®¡å¸ˆã€‚

æœ¬æ–‡æ¡£é˜è¿°äº† StoryTrace é¡¹ç›®åœ¨ Vibe Coding æ—¶ä»£çš„æ¶æ„æ¼”è¿›æ–¹å‘ï¼Œæ—¨åœ¨é€šè¿‡ **TDD (æµ‹è¯•é©±åŠ¨)**ã€**DDD (é¢†åŸŸé©±åŠ¨)** å’Œ **API Contracts (å¥‘çº¦ä¼˜å…ˆ)** ä¸‰å¤§æ”¯æŸ±ï¼Œæ„å»ºä¸€ä¸ªè®© AI èƒ½å¤Ÿé«˜æ•ˆã€å‡†ç¡®ã€å¹¶è¡Œå·¥ä½œçš„æ™ºèƒ½ä½“ç”Ÿæ€ç³»ç»Ÿã€‚

---

## ğŸ›ï¸ ä¸‰å¤§æ ¸å¿ƒæ”¯æŸ± (The Three Pillars)

### 1. TDD: AI çš„ç¼°ç»³ (The Leash)
**æ ¸å¿ƒç†å¿µ**ï¼šæµ‹è¯•ç”¨ä¾‹å³éœ€æ±‚æ–‡æ¡£ã€‚ä¸å…¶ç¼–å†™å¯èƒ½è¢«è¯¯è§£çš„è‡ªç„¶è¯­è¨€ Promptï¼Œä¸å¦‚æä¾›ä¸€ä¸ªâ€œçº¢è‰²çš„æµ‹è¯•â€ã€‚
*   **ä¼ ç»Ÿå«ä¹‰**ï¼šå…ˆå†™æµ‹è¯•ï¼Œå†å†™ä»£ç ã€‚
*   **AI æ—¶ä»£å«ä¹‰**ï¼š**éªŒæ”¶æ ‡å‡†æ•°å­—åŒ–**ã€‚äººç±»è´Ÿè´£å®šä¹‰æå…¶ä¸¥å¯†çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆSpecï¼‰ï¼ŒAI è´Ÿè´£åœ¨â€œçº¢-ç»¿-é‡æ„â€çš„å¾ªç¯ä¸­è‡ªä¸»ä¿®å¤ä»£ç ï¼Œç›´åˆ°æµ‹è¯•é€šè¿‡ã€‚
*   **è½åœ°ç­–ç•¥**ï¼š
    *   **Spec-First**ï¼šå¯¹äºå¤æ‚é€»è¾‘ï¼ˆå¦‚â€œè§’è‰²å¼§å…‰åˆ†æâ€ï¼‰ï¼Œå…ˆåœ¨ `tests/features/` ä¸‹ç¼–å†™æµ‹è¯•è„šæœ¬ã€‚
    *   **Agent Loop**ï¼šæŒ‡ä»¤ AI è¿è¡Œæµ‹è¯• -> åˆ†ææŠ¥é”™ -> ä¿®å¤ä»£ç ï¼Œå½¢æˆé—­ç¯ã€‚
    *   **Mock Everything**ï¼šé€šè¿‡ `fixtures` éš”ç¦»å¤–éƒ¨ä¾èµ–ï¼ˆLLM APIã€æ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œç¡®ä¿æµ‹è¯•çš„ç¡®å®šæ€§å’Œé€Ÿåº¦ã€‚

### 2. DDD & Clean Architecture: AI çš„å¯¼èˆªä»ª (The Compass)
**æ ¸å¿ƒç†å¿µ**ï¼šé«˜å†…èšï¼Œä½è€¦åˆã€‚åˆ©ç”¨**é™ç•Œä¸Šä¸‹æ–‡ (Bounded Contexts)** è§£å†³å¤§æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£è™½å¤§ä½†æ³¨æ„åŠ›æœ‰é™çš„é—®é¢˜ã€‚
*   **ä¼ ç»Ÿå«ä¹‰**ï¼šåˆ’åˆ†ä¸šåŠ¡è¾¹ç•Œï¼Œä¿æŒæ ¸å¿ƒé€»è¾‘ç‹¬ç«‹ã€‚
*   **AI æ—¶ä»£å«ä¹‰**ï¼š**Prompt ä¸Šä¸‹æ–‡ä¼˜åŒ–**ã€‚æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œè®© AI ä¸€æ¬¡åªåŠ è½½ç›¸å…³ä»£ç ï¼Œæå¤§é™ä½â€œå¹»è§‰â€ç‡ã€‚
*   **æ¶æ„åˆ†å±‚**ï¼š
    *   **Domain Layer (æ ¸å¿ƒåŸŸ)**ï¼šçº¯ç²¹çš„ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚ `core/summarizer`ï¼‰ï¼Œä¸ä¾èµ–ä»»ä½•å¤–éƒ¨æ¡†æ¶ã€‚
    *   **Infrastructure Layer (åŸºç¡€è®¾æ–½)**ï¼šæ•°æ®åº“ã€LLM å®¢æˆ·ç«¯ï¼ˆ`core/db`, `core/llm`ï¼‰ã€‚
    *   **Interface Layer (æ¥å£å±‚)**ï¼šAPI è·¯ç”±ï¼ˆ`backend/routers`ï¼‰ï¼Œä»…è´Ÿè´£åè®®è½¬æ¢ï¼Œä¸å«ä¸šåŠ¡é€»è¾‘ã€‚
*   **è½åœ°ç­–ç•¥**ï¼š
    *   å°† `backend` é€€åŒ–ä¸ºçº¯ç²¹çš„é€‚é…å™¨ã€‚
    *   æ˜ç¡®æ‹†åˆ† **Ingestion** (æ–‡æœ¬å¤„ç†), **Analysis** (è¯­ä¹‰åˆ†æ), **Narrative** (å›¾è°±æ„å»º) å­åŸŸã€‚

### 3. Protocols: AI çš„ååŒåè®® (The Protocol)
**æ ¸å¿ƒç†å¿µ**ï¼šå¥‘çº¦ä¼˜å…ˆï¼Œå¹¶è¡Œå¼€å‘ã€‚åªè¦æ¥å£åè®®å®šæ­»äº†ï¼Œå°±å¯ä»¥æ‹‰èµ·å¤šä¸ª Agent å¹¶è¡Œå·¥ä½œã€‚
*   **ä¼ ç»Ÿå«ä¹‰**ï¼šå‰åç«¯åˆ†ç¦»æ¥å£å®šä¹‰ã€‚
*   **AI æ—¶ä»£å«ä¹‰**ï¼š**å¤šæ™ºèƒ½ä½“åä½œåŸºçŸ³**ã€‚äººç±»æ¶æ„å¸ˆå®šä¹‰ `Data Protocol`ï¼ŒAI è‡ªåŠ¨ç”Ÿæˆå‰åç«¯ä»£ç ã€‚
*   **è½åœ°ç­–ç•¥**ï¼š
    *   **Single Source of Truth (SSOT)**ï¼š`data_protocol/models.py` (Pydantic) æ˜¯ç³»ç»Ÿçš„å”¯ä¸€çœŸç†ã€‚
    *   **Automation**ï¼šPydantic -> OpenAPI -> TypeScript Client (è‡ªåŠ¨ç”Ÿæˆ)ã€‚
    *   **Parallelism**ï¼šåç«¯ Agent å®ç°æ¥å£é€»è¾‘ï¼Œå‰ç«¯ Agent ä½¿ç”¨ Mock æ•°æ®å¼€å‘ UIï¼Œäº’ä¸é˜»å¡ã€‚

---

## ğŸš¦ Vibe Coding å·¥ä½œæµå»ºè®® (Workflow Strategy)

åœ¨ Trae è¿™ç±»åŸºäº LLM çš„ IDE ä¸­ï¼Œå»ºè®®é‡‡ç”¨ **"ä¸²è¡Œæ¶æ„ï¼Œå¹¶è¡Œæ‰§è¡Œ" (Serial Architecture, Parallel Execution)** çš„ç­–ç•¥ã€‚

### âŒ ä¸å»ºè®®ï¼šä¸‰ä¸ªçª—å£åŒæ—¶å¹¶è¡Œ (Full Parallelism)
è™½ç„¶ç†è®ºä¸Šå¯è¡Œï¼Œä½†ç›®å‰ï¼ˆ2025-2026ï¼‰çš„ AI ä¸Šä¸‹æ–‡è®°å¿†å’Œæ–‡ä»¶åŒæ­¥æœºåˆ¶åœ¨å¤šçª—å£é—´å¯èƒ½å­˜åœ¨**çŠ¶æ€ç«æ€ (Race Conditions)**ã€‚
*   **é£é™©**ï¼š
    *   çª—å£ A (TDD) ä¿®æ”¹äº†æµ‹è¯•æ•°æ®ç»“æ„ã€‚
    *   çª—å£ B (DDD) æ­£åœ¨é‡æ„æ ¸å¿ƒé€»è¾‘ï¼Œæœªæ„ŸçŸ¥ A çš„ä¿®æ”¹ã€‚
    *   çª—å£ C (Protocol) æ­£åœ¨ç”Ÿæˆæ—§ç‰ˆæœ¬çš„ API å®šä¹‰ã€‚
    *   **ç»“æœ**ï¼šåˆå¹¶æ—¶äº§ç”Ÿå¤§é‡å†²çªï¼Œäººç±»éœ€è¦èŠ±è´¹æ›´å¤šæ—¶é—´è§£å†³å†²çªã€‚

### âœ… æ¨èï¼šå•çª—å£æµæ°´çº¿ (Single Window Pipeline)
**"ä¸€æ­¥ä¸€ä¸ªè„šå°ï¼Œæ­¥æ­¥ä¸ºè¥"**ã€‚åˆ©ç”¨ Trae çš„ä¸Šä¸‹æ–‡ç®¡ç†èƒ½åŠ›ï¼Œåœ¨ä¸€ä¸ªä¼šè¯ä¸­æŒ‰é¡ºåºæ¨è¿›ï¼Œä½†åœ¨æ‰§è¡Œé˜¶æ®µåˆ©ç”¨ AI çš„é«˜é€Ÿèƒ½åŠ›ã€‚

#### é˜¶æ®µä¸€ï¼šå®šä¹‰åè®® (Protocol First)
*   **æ“ä½œ**ï¼šåœ¨å½“å‰çª—å£ï¼Œæ˜ç¡®å®šä¹‰ `data_protocol` å’Œ API æ¥å£ã€‚
*   **äº§å‡º**ï¼šæ›´æ–°åçš„ `models.py` å’Œ `openapi.json`ã€‚
*   **çŠ¶æ€**ï¼šè¿™æ˜¯â€œå®ªæ³•â€ï¼Œä¸€æ—¦ç¡®å®šï¼Œåç»­æ­¥éª¤ä¸¥æ ¼éµå®ˆã€‚

#### é˜¶æ®µäºŒï¼šç¼–å†™æµ‹è¯• (Spec Second)
*   **æ“ä½œ**ï¼šåŸºäºåè®®ï¼Œç¼–å†™æ ¸å¿ƒä¸šåŠ¡çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆå³ä½¿ä»£ç è¿˜æ²¡å†™ï¼‰ã€‚
*   **äº§å‡º**ï¼šä¸€ç»„å¤±è´¥çš„æµ‹è¯•è„šæœ¬ (`tests/features/xxx.py`)ã€‚
*   **çŠ¶æ€**ï¼šç¡®ç«‹äº†â€œéªŒæ”¶æ ‡å‡†â€ã€‚

#### é˜¶æ®µä¸‰ï¼šé¢†åŸŸå®ç° (Implementation Last)
*   **æ“ä½œ**ï¼š
    *   **åç«¯**ï¼šè®© AI å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œç›´åˆ°æµ‹è¯•å˜ç»¿ã€‚
    *   **å‰ç«¯**ï¼š(æ­¤æ—¶å¯å¼€å¯ç¬¬äºŒä¸ªçª—å£) åŸºäºå·²ç¡®å®šçš„ Protocol å’Œ Mock æ•°æ®ï¼Œè®© AI ç”Ÿæˆ UI ç»„ä»¶ã€‚
*   **ä¼˜åŠ¿**ï¼šå‰ç«¯å¼€å‘ä¸å†ä¾èµ–åç«¯è¿›åº¦ï¼Œè€Œæ˜¯ä¾èµ–**åè®®**ã€‚åç«¯å¼€å‘ä¸å†ä¾èµ–å‰ç«¯è”è°ƒï¼Œè€Œæ˜¯ä¾èµ–**æµ‹è¯•**ã€‚

---

> **æ€»ç»“**ï¼š
> äººç±»æ¶æ„å¸ˆåœ¨å•çª—å£ä¸­**ä¸²è¡Œ**å®šä¹‰ **åè®®** å’Œ **æµ‹è¯•**ï¼ˆé«˜è®¤çŸ¥è´Ÿè·ï¼Œéœ€å…¨å±€è§†é‡ï¼‰ã€‚
> ç„¶åæŒ‡æŒ¥ AI **å¹¶è¡Œ** å®Œæˆ **å‰åç«¯å®ç°**ï¼ˆä½è®¤çŸ¥è´Ÿè·ï¼Œé‡å¤æ€§å·¥ä½œï¼‰ã€‚
> 
> è¿™å°±æ˜¯ **"Human Architect, AI Builders"** çš„ç»ˆæå·¥ä½œæµã€‚
